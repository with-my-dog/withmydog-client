# 애플리케이션 구조 & 플로우

-   페이지 라우팅 단위 플로우

1. 메인(최초 서비스 소개) 페이지 (`/`)

    - 웹페이지 처음 접속 시 서비스 소개 및 사용방법 페이지로 이동
    - '다시보지않기' 누를 경우 로컬스토리지에 해당 상태를 저장
    - 로컬스토리지에 다시보지않기 상태가 저장되어 있을 경우 `/place`로 리다이렉트

2. 지도 및 장소 페이지 (`/place`)

    - 카테고리 네비게이션 바
        - 라우팅은 쿼리스트링으로 (`category=all`, `category=restaurant`, `category=cafe`, `category=pub`)
    - 지도 렌더링 (지도를 이동할 때마다 해당 지도의 바운드를 검색해서 DB 내에서 해당 위경도 범위에 맞는 데이터만 가져온다.)
    - 지도위에 카테고리별 가게 마커 띄우기
    - 마커 클릭 시 해당 가게의 정보창 띄우기
        - Issue) 지도 api에서 제공하는 CustomOverlay에 해당 내용을 바인딩해서 띄울 경우 mapEl 내부에서 렌더링되고, 상위 요소의 z-index가 0으로 설정되기 때문에 mapEl보다 상위에서 렌더링되는 목록 버튼보다 z-index가 낮아지게 된다. (가게의 정보창은 목록 버튼보다 상위 레이어에 렌더링되어야 한다.)
        - CustomOverlay를 사용하지 않고 컴포넌트로 만들어서 해당 마커 클릭 시 컴포넌트를 띄울 수 있도록 하면 될거같은데.. 데이터 바인딩은 어떻게?
        - 리액트의 `Portal` 기능을 사용하면 가능할 것 같기도..?
    - 지도에서 목록 버튼 누르면 가게 목록 띄우기

3. 가게 검색 폼 (`/place/search`)

    - 키워드로 검색 시 지도 api 내부 searchPlace 메서드를 거쳐서 검색 결과가 리턴된다.
    - 검색 결과 목록 중 원하는 가게를 클릭 시 가게 등록 페이지로 이동
    - Issue) 검색 결과의 가게 이름과 주소를 가지고 가게 등록 페이지로 이동해야 하는데..
        - 해결방법 1) 해당 가게의 이름과 주소를 쿼리스트링에 담아서 넘기고, 이동한 페이지에서 받아서 렌더링
        - 해결방법 2) 로컬스토리지에 가게 이름과 주소를 넣고, 이동한 페이지에서 로컬스토리지 내용을 받아서 렌더링하고 등록 프로세스 완료되면 로컬스토리지 데이터 삭제

4. 가게 등록 폼 (`/place/register`)

    - 가게 이름과 주소를 쿼리스트링으로 받아온다면 (`name=훌라훌라&address=서울 마포구 망원동 394-63`)
    - encodeURI -> decodeURI 형태로 쿼리스트링 값 바인딩
    - 카테고리 등 가게 정보에 대한 선택은 라디오버튼 or 체크박스 or 버튼
    - 해당 가게에 대한 리뷰는 textarea 형태로
    - formData를 이용해서 폼이 submit될때 input 값들을 전부 읽어서 한번에 서버에 post 요청 보내기

5. 등록 완료 페이지 (`/place/register/done`)

    - 등록 완료 안내
    - 획득한 뱃지 이름, 뱃지 이미지 보여주기 (처음가게등록 등..)
    - 다른 가게 공유하기 버튼 (Link to `/place/register`)
    - 메인으로 가기 버튼 (Link to `/place`)

6. 가게 상세 페이지 (`/place/:id`)

    - 목록이나 정보창에서 이미지나 가게이름 클릭 시 이동
    - 가게 정보
    - 리뷰 키워드
    - 리뷰 텍스트
    - 리뷰 쓰기 버튼

7. 가게 리뷰 페이지 (`/place/:id/review`)

    - 가게 상세페이지에서 리뷰 더보기 버튼 클릭 시 이동
    - 리뷰 필터링 버튼(전체, 소형견, 대형견)

8. 가게 리뷰 쓰기 페이지 (`/place/:id/review/write`)

    - 가게 등록 폼(`/place/register`) 컴포넌트 재활용

9. 가게 이미지 페이지 (`/place/:id/image`)

    - 이미지 어떻게 처리..? (논의 필요)

10. 드로어(프로필) 페이지 (`/profile`)

    - if (Not Logined)

        - 디폴트 이미지
        - '멍멍이 이름으로 프로필을 만들어보세요!'
        - 회원가입 폼
            - 이메일 입력
            - 비밀번호 입력
        - 로그인 버튼
        - 발도장 디폴트
        - 내 리뷰 / 내 등록 디폴트
        - 서비스 소개
        - 디자이너/개발자 도와주기

    - if (Logined)

        - 프로필 사진, 강아지 이름, 이메일 아이디
        - 프로필 수정 버튼
        - 레벨, 발도장, 리뷰, 등록 개수
        - 발도장 상세
        - 내 리뷰 / 내 등록 상세
        - 서비스 소개
        - 디자이너/개발자 도와주기

11. 프로필 수정 페이지 (`/profile/edit`)

    - 계정 이름 수정
    - 멍멍이 이름 수정
    - 멍멍이 사진(프로필 사진) 수정
    - 로그아웃 버튼
    - 탈퇴하기 버튼

12. 회원가입 페이지 (`/profile/register`) (deprecated)

    - 로그인 상태가 아닐 경우 드로어 페이지(`/proflie`)에서 직접 회원가입

13. 로그인 페이지 (`/profile/login`)

    - 로그인 페이지
    - 로그인 폼
        - 이메일 입력
        - 비밀번호 입력
        - 로그인하기 버튼
        - 자동 로그인 체크박스
